# QQ 平台使用指南

本指南面向在 QQ 平台与机器人互动的用户，帮助你快速掌握 `/nai` 生图指令、白名单管理命令等功能。

---

## 1. 使用前准备

1. **确认白名单**
   - 管理员需先把你加入用户白名单。
   - 群聊中还需确认所在群也在群白名单里。
2. **召唤机器人**：群聊里使用命令时记得先 `@机器人`，然后输入指令。
3. **每日次数限制**：机器人会统计你的每日使用次数，达到上限后需等待次日重置。

---

## 2. `/nai` 生图指令

### 群聊示例
```
@机器人 /nai 正面词条:<masterpiece, best quality> 分辨率:<竖图>
```

### 私聊示例
```
/nai 正面词条:<masterpiece, best quality> 分辨率:<竖图>
```

### 规则提示
- 指令必须以 `/nai` 开头，参数写成 `关键词:<内容>` 或 `关键词：<内容>`。
- 尖括号 `< >` 不可省略，里面填写具体的提示词或数值。
- 参数可以换行分隔；若消息附带图片，可用 `底图:<1>`、`角色参考:<2>` 等编号引用。
- 如果未填写任何 `键:<值>` 结构，插件会把整段文本当作正面提示词，并在提示信息中告知。

### 常用参数速查
| 参数名 | 是否必填 | 说明 | 默认值 |
| --- | --- | --- | --- |
| 正面词条 | ✅ 必填 | 生图提示词 | - |
| 负面词条 | ❌ 可选 | 去除内容 | 配置项 `preset_uc` 或内置 Heavy |
| 分辨率 | ❌ 可选 | `竖图` / `横图` / `方图` | `竖图` |
| 步数 | ❌ 可选 | 1~28 整数 | 28 |
| 指导系数 | ❌ 可选 | 0~10 数值 | 5 |
| 采样器 | ❌ 可选 | `k_euler`、`k_dpmpp_2m` 等 | `k_euler_ancestral` |
| 是否有福瑞 | ❌ 可选 | `是/否`，为 “是” 时提示词前加 `fur dataset` | 否 |
| 添加质量词 | ❌ 可选 | `是/否`，决定是否自动追加高质量标签 | 否 |
| 角色是否分区 | ❌ 可选 | `是/否`，`是` 时可指定角色位置 | 默认根据角色数判断 |
| 角色{n}正面词条 | ❌ 可选 | 第 n 个角色的提示词，最多 5 个 | - |
| 角色{n}位置 | ❌ 可选 | A1~E5 网格地址 | C3 |
| 角色参考 | ❌ 可选 | 消息中的图片编号 | 空 |
| 模型 | ❌ 可选 | 指定模型 | `config.yaml` 中 `default_model` |

> 若主提示词里缺少 `best quality` 或 `masterpiece`，会自动追加配置中的 `quality_words`。

### 完整示例
```
/nai 正面词条:<masterpiece, 1girl, long hair>
     负面词条:<lowres, bad hands>
     分辨率:<横图> 步数:<24> 指导系数:<6.5>
     采样器:<k_dpmpp_2s_ancestral> 添加质量词:<是>
```

---

## 3. 管理命令（中文）

| 命令 | 说明 |
| --- | --- |
| `/nai白名单 添加 <QQ|@某人> [昵称]` | 添加用户白名单 |
| `/nai白名单 删除 <QQ|@某人>` | 移除用户白名单 |
| `/nai限额 设置 <QQ|@某人> <次数> [昵称]` | 调整用户每日限额 |
| `/nai群白名单 添加 [群号/本群] [群名称]` | 添加群到白名单 |
| `/nai群白名单 删除 [群号/本群]` | 移除群白名单 |
| `/nai插件重启` | 热加载 `config.yaml` 和白名单配置 |

- 当命令包含 `@某人` 或 `昵称(QQ)` 格式时，会自动解析对应 QQ 和昵称。
- `本群` 用于在群内快速获取当前群号和群名。

---

## 4. 常见问题

1. **没有回应**：确认自己和所在群均在白名单，并且指令中确实 @ 了机器人。
2. **提示缺少 `/nai`**：必须以 `/nai` 开头，然后再写参数。
3. **参数错误**：检查 `参数名:<内容>` 是否写对，数值是否在合法范围。
4. **达到每日限额**：等待次日重置或联系管理员调整。
5. **生成提醒**：若你直接输入文本，机器人会提醒“已将全文当作正面词条”。

---

## 5. 小贴士

- 可以先写简单提示词尝试，再逐渐添加更多限制或角色描述。
- `角色{n}位置` 以 5 × 5 网格表示：A1 在左上角，E5 在右下角。
- 图生图时，可根据需要调整 `底图重绘强度`（越低越贴近原图）。
- 若遇到解析失败，请查看机器人提示，根据建议修改格式。

祝你在 QQ 平台玩得开心，如需帮助请联系管理员或维护者。
